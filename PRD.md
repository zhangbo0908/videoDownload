# 视频提取工具产品需求文档 (PRD)

## 1. 文档概述
**项目名称**：万能视频提取脚本  
**版本**：v1.1  
**状态**：开发中  
**最后更新时间**：2026-02-04

## 2. 产品目标
开发一个轻量级、无界面的命令行工具，旨在帮助用户通过单一链接快速下载主流视频平台的视频内容。产品需具备极高的兼容性，支持超过 1000 个视频网站，并能自动处理最高画质下载及常见格式转换。

## 3. 用户需求
- **核心场景**：用户下载视频后，希望能直接获得兼容性更好的 MP4 格式，方便在其他设备播放或剪辑，而无需再次使用第三方转换工具。
- **痛点**：
    - 部分平台（如 YouTube）默认高清格式为 WebM，在 iOS 或部分播放器上无法播放。
    - 手动使用转换工具耗时且麻烦。

## 4. 功能需求

### 4.1 单链接提取 (P0)
- **输入**：支持用户输入单个视频分享链接（HTTP/HTTPS）。
- **处理**：
    - 自动识别链接所属平台。
    - 自动解析视频真实地址。
    - 自动选择当前可用的最高清晰度。
- **输出**：
    - 显示下载进度条。
    - 下载完成后，文件保存在指定目录。

### 4.2 平台支持 (P0)
- 覆盖全球 1000+ 主流/小众视频站点（YouTube, Bilibili, TikTok, Twitter 等）。

### 4.3 异常处理 (P1)
- 无效链接提示、重试机制、依赖检查。

### 4.4 格式转换 (P0) - [New]
- **交互设计**：
    - **交互模式**：输入链接后，脚本应询问用户“是否转换为 MP4 格式 (y/n)? [默认 y]”。
    - **命令行模式**：增加 `--mp4` 或类似参数，指定输出格式。
- **技术实现**：
    - 利用 FFmpeg 将下载的视频（如 WebM/MKV）无损或高保真转换为 MP4 (H.264/AAC)。
    - 转换过程中需显示“正在转换格式...”提示。
    - 转换成功后自动删除原格式文件，只保留 .mp4 文件。

## 5. 非功能需求
- **性能**：转换速度应尽可能快（优先使用 copy 模式，若编码不兼容则使用快速编码预设）。
- **环境**：必须安装 FFmpeg。

## 6. 技术方案简述
- **核心引擎**：yt-dlp
- **转码引擎**：FFmpeg
